# ── Development Overlay ────────────────────────────────────────────
# Single-replica, low-resource, DEMO_MODE=true
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: argus-dev

bases:
  - ../../base

namePrefix: dev-

patches:
  # Scale everything to 1 replica and reduce resources
  - target:
      kind: Deployment
    patch: |
      - op: replace
        path: /spec/replicas
        value: 1
  # Lower HPA maximums
  - target:
      kind: HorizontalPodAutoscaler
    patch: |
      - op: replace
        path: /spec/minReplicas
        value: 1
      - op: replace
        path: /spec/maxReplicas
        value: 2

patchesStrategicMerge:
  - config-patch.yaml
  - resources-patch.yaml
